# =============================================================================
# xg2g .env Example
# =============================================================================
# Copy to .env and adapt:
#   cp .env.example .env
#
# Configuration precedence:
#   ENV > config.yaml > defaults
# =============================================================================

# -----------------------------------------------------------------------------
# Core
# -----------------------------------------------------------------------------

# OpenWebIF base URL (REQUIRED)
XG2G_OWI_BASE=http://192.168.1.100

# Optional HTTP Basic Auth
# XG2G_OWI_USER=root
# XG2G_OWI_PASS=secret

# Data directory for generated files (playlist, xmltv, cache, logs)
XG2G_DATA=./data

# API listen address
XG2G_LISTEN=:8080

# Bouquet selection (comma-separated bouquet NAMES)
XG2G_BOUQUET=Premium

# Prefer OpenWebIF /web/stream.m3u (receiver decides direct vs relay internally)
XG2G_USE_WEBIF_STREAMS=true

# Refresh channels/EPG on startup
XG2G_INITIAL_REFRESH=true

# -----------------------------------------------------------------------------
# EPG / XMLTV
# -----------------------------------------------------------------------------

XG2G_EPG_ENABLED=true
XG2G_EPG_DAYS=7
XG2G_XMLTV=xmltv.xml

# -----------------------------------------------------------------------------
# Picons (optional)
# -----------------------------------------------------------------------------

# XG2G_PICON_BASE=https://example.com/picons

# -----------------------------------------------------------------------------
# Security (recommended)
# -----------------------------------------------------------------------------

# Protect expensive endpoints (e.g. POST /api/refresh)
# Generate: openssl rand -hex 32
XG2G_API_TOKEN=change-me

# Optional API rate limiting
# XG2G_RATELIMIT_ENABLED=true
# XG2G_RATELIMIT_RPS=100

# -----------------------------------------------------------------------------
# Metrics (optional)
# -----------------------------------------------------------------------------

# Empty disables metrics; set a listen addr to enable:
# XG2G_METRICS_LISTEN=:9090

# -----------------------------------------------------------------------------
# Stream proxy / transcoding knobs (optional)
# -----------------------------------------------------------------------------

# Enable the stream proxy (HLS, repair/transcode pipelines)
XG2G_ENABLE_STREAM_PROXY=true
XG2G_PROXY_LISTEN=:18000

# Audio/video compatibility fixes (useful for Plex/Jellyfin)
XG2G_USE_RUST_REMUXER=true
XG2G_H264_STREAM_REPAIR=true

# FFmpeg override for web profiles (HLS/LL-HLS/Safari DVR)
# XG2G_WEB_FFMPEG_PATH=/usr/bin/ffmpeg

# -----------------------------------------------------------------------------
# LL-HLS (opt-in via ?llhls=1)
# -----------------------------------------------------------------------------

# XG2G_LLHLS_SEGMENT_DURATION=1
# XG2G_LLHLS_PLAYLIST_SIZE=6
# XG2G_LLHLS_STARTUP_SEGMENTS=2
# XG2G_LLHLS_PART_SIZE=262144

# Optional HEVC transcoding inside LL-HLS:
# XG2G_LLHLS_HEVC_ENABLED=false
# XG2G_LLHLS_HEVC_ENCODER=hevc_vaapi
# XG2G_LLHLS_HEVC_BITRATE=6000k
# XG2G_LLHLS_HEVC_PEAK=8000k
# XG2G_LLHLS_HEVC_PROFILE=main
# XG2G_LLHLS_HEVC_LEVEL=5.0
# XG2G_LLHLS_VAAPI_DEVICE=/dev/dri/renderD128

# -----------------------------------------------------------------------------
# Safari DVR HLS tuning (Safari native player)
# -----------------------------------------------------------------------------

# XG2G_SAFARI_DVR_SEGMENT_DURATION=6
# XG2G_SAFARI_DVR_WINDOW_SIZE=2700
# XG2G_SAFARI_DVR_STARTUP_SEGMENTS=1
