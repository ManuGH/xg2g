services:
  xg2g:
    image: xg2g:3.1.5
    container_name: xg2g
    restart: unless-stopped
    ports:
      - "8088:8088"
    environment:
      - XG2G_DATA=/var/lib/xg2g
      - XG2G_LOG_LEVEL=info
      # Required secrets/config via .env file or explicit env
      - XG2G_E2_HOST=${XG2G_E2_HOST}
      - XG2G_API_TOKEN=${XG2G_API_TOKEN}
      - XG2G_API_TOKEN_SCOPES=v3:admin,v3:read,v3:write
    volumes:
      - /var/lib/xg2g:/var/lib/xg2g
      # Optional: Mount a custom config
      # - ./config.yaml:/var/lib/xg2g/config.yaml:ro
    healthcheck:
      test: ["CMD", "xg2g", "healthcheck", "ready"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 60s
