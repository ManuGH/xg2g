#!/bin/bash
FILE=$1
REPLACEMENTS=(
    "service_ref:serviceRef"
    "restart_required:restartRequired"
    "audio_codec:audioCodec"
    "video_codec:videoCodec"
    "begin_timestamp:beginTimestamp"
    "chipset_description:chipsetDescription"
    "driver_date:driverDate"
    "duration_sec:durationSec"
    "duration_seconds:durationSeconds"
    "enigma_version:enigmaVersion"
    "image_distro:imageDistro"
    "image_version:imageVersion"
    "kernel_version:kernelVersion"
    "memory_available:memoryAvailable"
    "memory_total:memoryTotal"
    "memory_used:memoryUsed"
    "oe_version:oeVersion"
    "pos_seconds:posSeconds"
    "webif_version:webifVersion"
    "attempt_mode:attemptMode"
    "audio_codecs:audioCodecs"
    "capabilities_version:capabilitiesVersion"
    "channel_name:channelName"
    "channel_ref:channelRef"
    "checked_at:checkedAt"
    "client_ip:clientIp"
    "current_path:currentPath"
    "current_root:currentRoot"
    "delivery_policy:deliveryPolicy"
    "device_type:deviceType"
    "duration_source:durationSource"
    "finished_at:finishedAt"
    "fs_type:fsType"
    "health_status:healthStatus"
    "is_nas:isNas"
    "is_seekable:isSeekable"
    "last_check:lastCheck"
    "last_error:lastError"
    "last_progress:lastProgress"
    "logo_url:logoUrl"
    "max_video:maxVideo"
    "missing_channels:missingChannels"
    "mount_status:mountStatus"
    "playlist_url:playlistUrl"
    "progressive_ready:progressiveReady"
    "recording_id:recordingId"
    "scanned_channels:scannedChannels"
    "segment_count:segmentCount"
    "start_unix:startUnix"
    "start_window:startWindow"
    "started_at:startedAt"
    "supports_hls:supportsHls"
    "supports_range:supportsRange"
    "total_channels:totalChannels"
    "updated_at:updatedAt"
    "updated_count:updatedCount"
    "uptime_seconds:uptimeSeconds"
    "video_codecs:videoCodecs"
    "request_id:requestId"
    "session_id:sessionId"
    "timer_id:timerId"
    "correlation_id:correlationId"
    "selected_output_url:selectedOutputUrl"
    "selected_output_kind:selectedOutputKind"
)

for pair in "${REPLACEMENTS[@]}"; do
    OLD="${pair%%:*}"
    NEW="${pair##*:}"
    echo "Replacing $OLD with $NEW"
    # Replace property names and required list items
    # Using word boundaries \b to avoid partial matches
    sed -i "s/\b$OLD\b/$NEW/g" "$FILE"
done
