#!/bin/bash
FILE=$1
REPLACEMENTS=(
    "video_codec:videoCodec"
    "audio_codec:audioCodec"
    "bitrate_kbps:bitrateKbps"
    "capabilities_version:capabilitiesVersion"
    "video_codecs:videoCodecs"
    "audio_codecs:audioCodecs"
    "supports_hls:supportsHls"
    "supports_range:supportsRange"
    "max_video:maxVideo"
    "device_type:deviceType"
    "allow_transcode:allowTranscode"
    "selected_output_url:selectedOutputUrl"
    "selected_output_kind:selectedOutputKind"
    "request_id:requestId"
    "session_id:sessionId"
    "timer_id:timerId"
    "correlation_id:correlationId"
    "chipset_description:chipsetDescription"
    "oe_version:oeVersion"
    "image_distro:imageDistro"
    "image_version:imageVersion"
    "enigma_version:enigmaVersion"
    "kernel_version:kernelVersion"
    "driver_date:driverDate"
    "webif_version:webifVersion"
    "memory_available:memoryAvailable"
    "memory_total:memoryTotal"
    "memory_used:memoryUsed"
    "current_root:currentRoot"
    "current_path:currentPath"
    "recording_id:recordingId"
    "is_nas:isNas"
    "is_seekable:isSeekable"
    "logo_url:logoUrl"
    "service_ref:serviceRef"
    "restart_required:restartRequired"
    "pos_seconds:posSeconds"
    "duration_seconds:durationSeconds"
    "duration_sec:durationSec"
    "begin_timestamp:beginTimestamp"
    "session_id:sessionId"
    "timer_id:timerId"
    "scanned_channels:scannedChannels"
    "total_channels:totalChannels"
    "updated_count:updatedCount"
    "uptime_seconds:uptimeSeconds"
    "segment_count:segmentCount"
    "start_unix:startUnix"
)

# Use word boundaries for keys but match the json:\" prefix
for pair in "${REPLACEMENTS[@]}"; do
    OLD="${pair%%:*}"
    NEW="${pair##*:}"
    find "$FILE" -type f -name "*.go" -exec sed -i "s/json:\"$OLD/json:\"$NEW/g" {} +
done
