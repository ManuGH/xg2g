#!/bin/bash
FILE_DIR=$1
REPLACEMENTS=(
    "service_ref:serviceRef"
    "recording_id:recordingId"
    "is_seekable:isSeekable"
    "pos_seconds:posSeconds"
    "duration_seconds:durationSeconds"
    "duration_sec:durationSec"
    "request_id:requestId"
    "session_id:sessionId"
    "timer_id:timerId"
    "correlation_id:correlationId"
    "chipset_description:chipsetDescription"
    "oe_version:oeVersion"
    "image_distro:imageDistro"
    "image_version:imageVersion"
    "enigma_version:enigmaVersion"
    "kernel_version:kernelVersion"
    "driver_date:driverDate"
    "webif_version:webifVersion"
    "memory_available:memoryAvailable"
    "memory_total:memoryTotal"
    "memory_used:memoryUsed"
    "current_root:currentRoot"
    "current_path:currentPath"
    "is_nas:isNas"
    "restart_required:restartRequired"
    "logo_url:logoUrl"
    "begin_timestamp:beginTimestamp"
    "scanned_channels:scannedChannels"
    "total_channels:totalChannels"
    "updated_count:updatedCount"
    "uptime_seconds:uptimeSeconds"
    "segment_count:segmentCount"
    "start_unix:startUnix"
    "selected_output_url:selectedOutputUrl"
    "selected_output_kind:selectedOutputKind"
    "audio_codec:audioCodec"
    "video_codec:videoCodec"
    "audio_codecs:audioCodecs"
    "video_codecs:videoCodecs"
    "supports_hls:supportsHls"
    "supports_range:supportsRange"
    "max_video:maxVideo"
    "device_type:deviceType"
    "mount_status:mountStatus"
    "health_status:healthStatus"
    "fs_type:fsType"
    "checked_at:checkedAt"
    "allow_transcode:allowTranscode"
    "started_at:startedAt"
    "missing_channels:missingChannels"
    "last_check:lastCheck"
    "is_recording:isRecording"
    "service_name:serviceName"
)

for pair in "${REPLACEMENTS[@]}"; do
    OLD="${pair%%:*}"
    NEW="${pair##*:}"
    echo "Replacing $OLD with $NEW in $FILE_DIR"
    grep -rl "$OLD" "$FILE_DIR" --exclude-dir=node_modules --exclude-dir=client-ts | xargs -r sed -i "s/\b$OLD\b/$NEW/g"
done
